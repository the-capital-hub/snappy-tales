"use client";

import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";

const Scribble = () => {
  const pathRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current as SVGPathElement | null;
    if (!path) return;
    const length = path.getTotalLength();

    // Initial hidden stroke setup
    gsap.set(path, {
      strokeDasharray: length,
      strokeDashoffset: length,
      fill: "none",
      stroke: "currentColor",
      strokeWidth: 3,
    });

    // Animate path drawing once on mount
    gsap.to(path, {
      strokeDashoffset: 0,
      duration: 2.5,
      ease: "power2.out",
      fill: "black",
      delay: 0.3, // small delay for smoother entrance
    });
  }, []);

  return (
    <div className="w-[180px] md:w-[219px] text-black dark:text-white">
      <svg
        viewBox="0 0 219 219"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        className="w-full h-auto"
      >
        <g clipPath="url(#clip0_205_20550)">
          <path
            ref={pathRef}
            d="M143.243 162.972C147.108 165.204 150.377 166.803 153.269 168.889C154.805 170 156.787 171.944 156.722 173.443C156.653 175.004 154.643 177.044 152.992 177.851C148.168 180.219 143.106 182.225 138.054 184.045C136.962 184.439 134.972 184.283 134.025 183.096C132.891 182.121 135.088 179.869 136.181 179.251C140.368 176.932 144.805 175.013 149.522 172.775C146.809 171.209 144.525 169.954 142.272 168.589C136.258 164.925 135.813 160.763 141.244 156.345C148.921 150.088 156.774 144.027 164.557 137.863C165.496 137.124 166.386 136.358 167.29 135.568C168.832 134.506 168.431 134.146 166.951 134.604C164.114 135.526 161.267 136.411 158.43 137.333C153.389 138.968 148.358 140.641 143.308 142.238C142.168 142.604 140.882 142.725 139.773 142.982C137.822 143.423 136.095 142.202 135.257 141.047C134.547 140.06 134.037 138.614 135.443 136.513C138.436 132.16 141.752 128.025 145.077 123.927C152.562 114.678 160.105 105.494 167.354 95.8205C163.612 97.7567 159.821 99.6651 156.137 101.667C147.986 106.083 139.938 110.654 131.733 114.943C128.924 116.426 125.706 118.729 122.604 115.786C119.691 113.015 121.552 109.737 122.668 106.861C126.215 97.8343 129.968 88.8948 133.625 79.8998C133.99 78.9904 134.221 78.0356 134.831 76.1474C129.498 79.3417 124.739 81.875 120.359 84.9154C111.134 91.3035 102.065 97.9743 92.9426 104.518C86.8687 108.884 83.4847 107.539 82.5074 100.029C81.2702 90.6411 80.3599 81.1857 79.2742 71.7571C79.0689 70.0062 78.6742 68.306 78.181 65.5568C77.0871 67.2297 76.3887 68.1067 75.9202 69.0845C70.5035 80.2961 65.1107 91.5215 59.7041 102.771C58.2847 105.728 57.3333 109.372 53.5351 109.963C49.5613 110.582 47.9196 107.105 45.9268 104.515C43.8656 101.82 41.9079 99.0576 39.1587 96.4462C39.1661 99.427 39.1873 102.384 39.1947 105.365C39.1976 107.799 39.3861 110.244 39.1554 112.64C39.0794 113.492 37.9486 114.951 37.4057 114.894C36.4296 114.811 35.4499 114.789 34.6941 113.104C34.3638 112.402 34.2237 111.425 34.2138 110.555C34.0375 104.596 33.6996 98.6394 33.9324 92.6926C34.0123 90.9464 35.3401 88.4803 36.7596 87.7956C37.9483 87.2336 40.649 88.3767 41.8056 89.5886C44.7763 92.648 47.2703 96.2003 49.9509 99.5404C50.8296 100.624 51.6807 101.755 52.8806 103.28C54.2574 100.618 55.3709 98.4127 56.5222 96.1968C62.47 84.6198 68.4179 73.0427 74.3898 61.4795C74.8093 60.6975 75.3008 59.9571 75.8504 59.2822C77.7618 57.025 80.7223 56.9419 82.1962 59.4893C83.5474 61.8057 84.6149 64.5024 85.0019 67.1584C86.4126 76.9666 87.4963 86.8422 88.6936 96.6873C88.8161 97.7503 88.9903 98.779 89.2004 100.245C95.8395 95.564 102.014 90.9672 108.414 86.7566C116.055 81.7263 123.843 76.9408 131.655 72.1691C134.027 70.7219 136.633 68.4816 139.532 70.6674C142.43 72.8531 141.597 76.1809 140.612 78.9408C137.507 87.6459 134.071 96.2568 130.784 104.889C130.241 106.272 129.685 107.679 129.642 109.639C135.2 106.83 140.758 104.022 146.306 101.176C154.466 97.0215 162.592 92.815 170.762 88.6982C172.709 87.7098 174.922 86.427 176.859 88.5053C178.829 90.6354 177.808 92.9584 176.39 94.8603C170.597 102.622 164.766 110.393 158.77 118.006C153.919 124.135 148.808 130.05 144.064 136.881C148.085 135.682 152.041 134.317 156.113 133.307C161.245 132.014 166.431 130.847 171.647 130.018C173.24 129.753 176.094 130.409 176.472 131.363C177.009 132.761 176.378 135.406 175.256 136.518C171.112 140.591 166.626 144.37 162.109 148.035C156.239 152.936 150.188 157.54 143.243 162.972Z"
          />
        </g>
        <defs>
          <clipPath id="clip0_205_20550">
            <rect
              width="159.658"
              height="159.658"
              fill="white"
              transform="translate(79.8301) rotate(30)"
            />
          </clipPath>
        </defs>
      </svg>
    </div>
  );
};

export default Scribble;
